name: Regression Test

on: [pull_request]

jobs: 
  test:
    runs-on: [ubuntu-latest]
    steps:
      - uses: actions/checkout@v3

      - name: Create folder for reports
        run: mkdir reports

      - name: Robot Framework
        uses: joonvena/robotframework-docker-action@v1.0
        env:
            BROWSER: chrome
            ROBOT_TESTS_DIR: ${{ github.workspace }}/test_cases
            ROBOT_REPORT_DIR: ${{ github.workspace }}/reports

        run: robot test_cases/login_form.robot

        - name: Upload reports
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: reports
          # set path to Robot Framework results reports. Exclude dummy file that is needed because of ppodgorsek image priviledges.
          path: ${{ github.workspace }}/reports
